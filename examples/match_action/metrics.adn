internal 
{
	record: Map<string, Instant>
  latency: Vec<float>
}

fn init() {
}

fn req(rpc_req) {
	record.set(rpc_req.get('name'), current_time());
	send(rpc_req, NET);
}

fn resp(rpc_resp) {
  rpc_name := rpc_resp.get('name');
  lat := time_diff(current_time(), record.get(rpc_name));
  latency.set(latency.size(), lat);
}